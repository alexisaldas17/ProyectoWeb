<div class=" mt-5">
  <div class="row mb-5 ">
    <div class="col-8 shadow-lg p-0 bg-white">


      <div class="card-body">
        <form (ngSubmit)='onSubmit()' [formGroup]="addPropiedadForm">

          <div class="tab-panel">
            <tabset class="member-tabset" #tipoTabs>
              <tab heading="Crear" id="tabCrear">

                <div class="card-header">
                  <h3>Añadir Propiedad</h3>
                </div>

                <div class="tab-panel ">
                  <tabset class="member-tabset" #formTabs>

                    <!--*******************INFORMACION BASICA*****************-->

                    <tab heading="Información Básica" id="tab1" formGroupName="BasicInfo">
                      <div class="form-group col-12">
                        <div class="btn-group" btnRadioGroup formControlName="SellRent" required>

                          <label for="" class="btn btn-outline-primary mr-2" btnRadio="1" tabindex="0" role="button"
                            name="SellRent">Venta
                          </label>
                          <label for="" class="btn btn-outline-primary" btnRadio="2" tabindex="0" role="button"
                            name="SellRent">Arriendo
                          </label>
                        </div>
                        <div *ngIf="SellRent.invalid && nextClicked" class="error-block">
                          Obligatorio: Seleccione una opción.
                        </div>
                      </div>

                      <div class="form-group col-12">
                        <p>Tipo de Propiedad </p>
                        <select   [(ngModel)]="propiedad.nombre" class="form-control" formControlName="PType">
                          <option  *ngFor="let item of tpropiedad" [value]="item.nombre">
                            {{item.nombre}}

                          </option>
                        </select>

                      </div>

                      <div class="form-group col-12">
                        <label for="nombre">Nombre</label>
                        <input type="text" class="form-control" formControlName="Name" required minlength="5"

                         >
                        <span *ngIf="Name.invalid && Name.touched" class="error-block">
                          Obligatorio: Ingresar un nombre
                          <span *ngIf="Name.hasError('minlength')">minimo 5 caracteres</span>
                        </span>

                      </div>
                      <div class="form-group col-12">

                        <button type="button" (click)="selectTab(1,BasicInfo.valid)" class="btn btn-primary mr-2">
                          Siguiente
                        </button>

                      </div>

                    </tab>

                    <!--*********************PRECIO Y AREA**************************-->

                    <tab heading="Precio y Área" formGroupName="PriceInfo">

                      <div class="form-group col-12">
                        <label *ngIf="SellRent.value==1">Precio Venta(USD)</label>
                        <label *ngIf="SellRent.value==2">Precio Arriendo (USD)</label>
                        <input type="number" class="form-control" formControlName="Price" pattern="^\d*(\.\d{0,2})?$"
                          [(ngModel)]="propiedad.precio">
                      </div>
                      <div *ngIf="Price.invalid && (nextClicked || Price.touched)" class="error-block">
                        Obligatorio: Ingrese precio.
                        <span *ngIf="SellRent.value==1; else ShowRent">precio</span>
                        <ng-template #ShowRent>arriendo</ng-template>
                      </div>

                      <!--  <div class="form-group col-12">

                <label>Seguridad (USD)</label>
                    <input type="text" class="form-control" formControlName="Security">
                  </div>

                  <div class="form-group col-12">
                    <label>Mantenimiento (USD)</label>
                    <input type="text" class="form-control" formControlName="Maintenance">
                  </div>
              -->

                      <div class="form-group col-12">
                        <label>Area (m2)</label>
                        <input type="number" class="form-control" [(ngModel)]="propiedad.areaM2"
                          formControlName="BuiltArea">
                      </div>

                      <div class="form-group col-12">
                        <button type="button" class="btn btn-primary btn-block"
                          (click)="selectTab(2, true)">Siguiente</button>

                        <button type="button" class="btn btn-secondary btn-block"
                          (click)="selectTab(0, true)">Atrás</button>
                      </div>

                    </tab>


                    <!--**************ADDRESS-INFO*****************-->
                    <tab heading="Direccion" formGroupName="AddressInfo">

                      <div class="form-group col-12">
                        <label for="ciudad">Ciudad</label>
                        <select [(ngModel)]="propiedad.ciudad" name="" id="" formControlName="City" class="form-control">
                          <option *ngFor="let item of ciudades" [value]="item.nombre">
                            {{item.nombre}}

                          </option>
                        </select>

                      </div>


                      <div class="form-group col-12">
                        <label>Direccion</label>
                        <input type="text" class="form-control" formControlName="Address">
                      </div>

                      <div class="form-group col-12">
                        <button type="button" class="btn btn-primary btn-block"
                          (click)="selectTab(3, true)">Siguiente</button>

                        <button type="button" class="btn btn-secondary btn-block"
                          (click)="selectTab(1, true)">Atrás</button>
                      </div>


                    </tab>
                    <tab heading="Otros Detalles" formGroupName="OtherInfo">


                      <div class="form-group col-12">
                        <label>Años/Propiedad</label>
                        <input type="text" class="form-control" formControlName="Años" required>
                      </div>

                      <div class="form-group col-12">
                        <label>Descripción</label>
                        <textarea [(ngModel)]="propiedad.descripcion" type="text" class="form-control" rows="6" formControlName="Description"
                          required></textarea>
                      </div>

                      <div class="form-group col-12">
                        <button type="button" class="btn btn-primary btn-block"
                          (click)="selectTab(4, true)">Siguiente</button>

                        <button type="button" class="btn btn-secondary btn-block"
                          (click)="selectTab(2, true)">Atrás</button>
                      </div>


                    </tab>
                    <tab heading="Cargar Fotos">


                      <!--**************************CARGA DE IMASGEN**********************-->
                      <div class="form-group col-12 ">
                        <div class="photo-control">

                          <label class="image-upload-container btn btn-bwm mt-5">
                            <app-upload-form ></app-upload-form>
                          </label>



                          <app-upload-list></app-upload-list>
                          <!--**************************CARGA DE IMASGEN**********************-->
                        </div>

                      </div>
                      <div class="form-group col-12">
                        <button type="button" (click)="selectTab(3, true)" class="btn btn-secondary mr-2">Atrás</button>

                        <button type="submit" (click)="onSubmit()" class="btn btn-success mr-2">Guardar</button>
                        <button type="reset" class="btn btn-danger mr-2">Cancelar</button>
                      </div>


                    </tab>
                  </tabset>
                </div>
              </tab>
              <tab heading="Editar">
                <div class="card-header">
                  <h3>Editar Propiedad</h3>
                </div>
                <div class="row">
                  <div *ngFor="let propiedad of publicacionesUsuario" class="shadow-lg col-sm-4 mt-5">
                    <app-propiedad-card editIcon="true" [propiedad]="propiedad">

                    </app-propiedad-card>
                  </div>
                </div>

              </tab>
            </tabset>
          </div>


        </form>
      </div>

    </div>


    <div class="col-3 mt-5">
      <div class="card-header">
        <h3>Vista Previa</h3>
      </div>
      <div>
        <div class="shadow-lg p-3 bg-white">
          <app-propiedad-card [propiedad]="propiedad">
          </app-propiedad-card>
        </div>



      </div>

    </div>

  </div>
</div>
